#!/bin/bash

####################################
####################################
####################################
####################################

BROADCAST="5aa5aa555aa5aa55000000000000000000000000000000000000000000000000a2f3000037276a00528022a2f00d43b40100000090c80000178a382be0b953f51e066fa79407190dfec18c688af01de0dc428a1f11ace75a10dacb9050c542110e29cc734468d0ae6c476c87c99544bbd0587d14182256eb3b23c674c57d8a2852412c1c335003d6a5fa1d3080c9d1b6210983b3879657a6"
AC_ON_23="5aa5aa555aa5aa5500000000000000000000000000000000000000000000000046ee000037276a005281fda8e334ea3401000000a8ea00000a3a0fee7f7312164a35cee3fd9c08ffaa8d9b3278dc67ba00780faaf4e3d4021bfbe3a5b59d21f06a6012a657014825418d83e9dc2f176228d77b08f84a669b461c5f70f0e925a7626a9178e0d3262aaed1003a1ace7a148b7b540634ed34f24052efefa9e753ce452786fb60d6d22839cdb9eeca875501d03f1aabf59988862b67a081782b7e60ead5538bc6a9c467efc7c0f16cdc639120472548be6e1c30101293ccc67585a4a05cbeb286b084b688135904b529866da00fecd00bbf9ebe0b328b120fceed4c7b6323195b4a7e4bf9f23b0dff59ecde359ca87503dc9d451e8d101f3b7aa4c838356ad41c64cfc29466110d31dab08726a6340def8d165c81a3383c7ba972ba6190792d07868e9011ad2484189ccbfd6c4180c8a25070f03beb8a3473321afd6a7eeaafa0e965f492c18a8f81234977cb6f315a0d27081d7e09db342df45c0e3ac6c5dc6663ac0b4168501cba94ad626a719a48752bca410794384a09b046ca92f51a233c775247420056714a373deb042c41c3b20c0394fe2b77c9b1efdbb23c138b60aad31c5b86b980b9a989975d08ce8a6a916458799990b2859885b1a23a3d6a2615badc1aae9a3fd9eee9cd77c8c0bc1b469a90a1a559754894c05c34f7903993709ee74326f3d6db737cb8e40ea1bd3683b5a145fc107de2e900fbbd1bcf71d09d69a07bc0ca08353e92810465653673553421840797a173840eb81d4fac6baca12edbae05345093cef0815ffa037198b6b1d9e72cb93295296a77c3d69f97ada08fb5b97a410f33a4f8d809042ea287cb6283dc5b82bce608706442dc3df52405fc31ac0f8674a0c15b6367623607c896ce6e56"
AC_OFF="5aa5aa555aa5aa550000000000000000000000000000000000000000000000007cf3000037276a00dd82fda8e334ea3401000000a6ea00006a6506da07158ca4e89d8cbd9dd6bd9cc3cc5c91d2b6846a4bbed6107fef48331756be01a654b2f9132a05821ebea9cfba23323d8b31e28a8fd3f3afcb1ee56165a552632928d25dbf3e3d005ce9d5cd5b6cdb31884324716197fc126500d546dbb95efc28fb0a728efa3ffb70238a2c0a3d708e97ebd7b3c7dcba28df2e83c6ad622b9dcf5c2ff45aae0b9789806f572f4412b4c66dce5c9199331bc30897ca09829ca5a25c46764a0d1742b161f89344b29bdf67a1bec9ca154e25d58d797ffd17ca98956868440f451058ff51e9f614ba60214a32cbd04146c36006cf2b26def3f11558c19ee7ffc8994ed51d9879a78b218413f101bc59d4e5b0149bd9819087cbc870be5f6ae2b7fb0a9501ea4b7535da9e4c76e6645be5aab5ba5f62677d9661bb73915189f7c53bf538f369c7a79ad82dc46031416b1037730c36d72f067a5798f50e48d142315c2445b5af3407e114e2114497a16481dae2c42edbe68ac13b2fc251be21a8deb7276ff1e907231a2d6c2f0e02997a154601bd5b9e084b44970f5a2d8b0a87fd9b58c2556de78b90971adc2c6e35835f6d77c70bd1224109d8fadc45aeca140afe21d75f485185d4a2ef994f203eb05e278dc21253deda24917ca548dc40e06212a30e903700778ae8a848b38248e356124e3a042753dd556043ffcc6c0637affaeb499698113e64fd2f0654bedfbc59da9cd2cdf944b80e3954dde57031e9d33a6f59be4cf2d416bf681978df2fc2e4aff32ae0a71021cd5bc7c74800b328174dda73e936cd278ce2a00ad514a8c9362f41b4da69df0b6a03175af16aa1884f24f345ae0f1470b5023de9e0785acf501ae2b751d290"
AC_COMFORT="5aa5aa555aa5aa5500000000000000000000000000000000000000000000000016ef000037276a00fd82fda8e334ea34010000008ee90000dcc5ffac916b22387f581210eb9288338b82b04bcd7037a1e2cb6c3cece1482dc851c9753dba821322eae2c217b33cd59f7b1796091e2861415f0fc0141d3b666f6e99181e1d612e58a59b45fbdc34a9d4f8b57c2b0ad8d182b255702b6008dfcf64e2d04ece0d3ad09c4e529521683c2d2689cad016be63c3253419964077b9c2ebda75d5f7ae50b189d5484d461b50420d0e58fea05573843320ab92218dd75e3e6ae1017db6d80280a15455dc74efc48ec28b7197112eb7748ccfe2f5dd8f90a79d927b864947b5ad078ce216eefa67ae0c363eba7456defbe9541ca9eb6cd4dd6cf08cb3940b9591550b7a6ba818de062523665a8b60fed5efe6ba930702dfe1ed254a48ac8016893c6010fb64285a91562476665e02292d282ca86b5ae600e827a52d24e266797b709ef0cf7992c1327d5d8422a708a799ae31ae7e8dddd5acb8148adaad60ec16b948530c4685d00591691f45e2543d54633220312f99f0d5fb2476ba2d3a6fb855b4ab149a9fdf68df35898d388e17d86ce5b346160efc7e059d1590e93edc92e2996139192dd3d6283124eec80c0157af854c644a3e5922ef9a9b12cba217b7a70bbefdab59c5a8f85b2b62c5bce26f9e12e41afa773b91a1a8fb9515ac39be53f7fe937a0ed1a46ab52512312d9af2f7024d4e9dfad17bcf1c22ed206f5b454e36693045772730aad44e9756a679a0300410302639154e258dfb9bdc1175a8576903637c94267956eb082a6a66f86c57ea1bce5864d838e18e446f26cbfa7b0364d5604ce8f22756fea24963885e6e499e52f39dc4fc90b06b49bf340d89148b8f13f2c04b7e18e967a9b21fe11ea9908bea648dd0"
AC_SWING="5aa5aa555aa5aa550000000000000000000000000000000000000000000000000bfb000037276a009781fda8e334ea34010000001aeb0000460a326fb8a758d13379075ae5adeb97932d2d08da35709398a71dbfebb2f1fb3d059b136f80ee79d2335dd495cdf82f7135156582c27aee5e3340f5981502ae9e7db9c36a84c64fae2aafe6d87e2aca9175df9ad37bb2e5c2e37eac8b09373305f45f91fa5e9c7b34965a653a8ed035561478b32ef883001f460a182f9bcf94d1559aa4f9301068ef630dd89a81da350b6adc3405d5d177e66be734c88868e5ba717ac85028805bc8383dd29d62419ff2013d8014a4ddd29543263d3df3e98c13966b96badfe0909f21637a290727f09efbb4dbf69d3d3a17b3aff2b6d82df7e9e66fd7ebc654e255377a3ba3003996d1020c6a73a306679e753e8380a0cf2b818d12f7958053b19c75e561f0f368efe2ccd1d7260eb349f82dee44029a2fbf124ddb50d57df6ac473b9896e7deb1993c52c4f56b1813fa2b45fbc14da84ee0b89eea9d82865bf6162431459f53f0aa3482f57acadc6f514d01220a07ce866b67ec0bb7fdaa3140a88a1598999111dbef33585f10e2706ce4eccb7c178377117ec76769054eec5416218df044b652a6503156f15e8d2a6e7f3a92a90086904cc1f26ec610d2a0b25eef6d78593118d7732a5fc2a8d9a884c70e55cc3b7dd3f60cbafb2af5f34b2c182436122a3040570aa95cac7a666fe209f86163c82304aa367d1e787b59cbb95847879a9defcd033889c7e2610c1c6d89092fe9d0c0db412708a7dde07ed70e9b96e76341d7c679b0cf39ff044a76ea922b021aad5b063acfa6b6ac4d3e5c708f17d249d04e65916cbe8f436b8fcab56fe36b6f1c407beed3bae896e6a266c6a0d711e11a93a706fd83e759947ddb00053e918e6a40f974"
AC_POWERFUL="5aa5aa555aa5aa55000000000000000000000000000000000000000000000000a7f2000037276a005680fda8e334ea340100000053ea00007a8f80c76135737f289c0b03b624718f333359e81be4a89303b41f42bdaea39a858d60d8460962805fcb2e15e69ba3abbddd03ceb70204874d7d8fb9118eff7f4c9cc8854b2e0a030130b0d85b160970db7f2fe985876097d120cc42121f28e1d0394bed2e95a0d67c309a4c34e987db63f3172aca08f1dc23b846bc5600dec8383e418330af59a9d0e78026a55681e6f365ee3e81ac64856ab006ac1503c823b91e13ac686ed788d0e6a6028cdb5125b8e5d43e5e833d7acfa2ccc0bd8f61ed2a908bbf781630bdbaf835099047d503cf376bb6bee2721fef750412f7855020539a01eb7c69b6c4cb92c6ecdc4a701c6b4ad22b5adacb6af2dbaef75ad39e57a214631487c6c82fa0185d58c037a350f5dd53f930253190bbe396c8d070ebd5a2be85ced12610b792124089a765efd3d35b557ae4d6bb2e3d473ea48d2a0d23207484a13a927f3c0a449c4559e91c2f97764f7e65adf7af99f6bf62a60d7f5137adabb0d910bd1274ade8ed088395fb4f606295ff9a8d21bf65da49962d1920a40f9ad6232fb746cc79a271103205e077065fe0aca11005c557d1ddf954a91f68e88efe46bfd81499619c60b029970ed692ef0faae61415298fc6f009b2f66d8e7f696aceaf0d12bc8cce4e80de1eab65fe8478bf2f3c9a801016265d6a816877df203c17826809497633924a77f818266112119051c7b6737b29aff1d7ef8ee599de1723a2d183572bc1b1734eada6e5d1ed4a4c5c74cc803a748e07317e07d3d0bdc1822ac313e97a6c13aa96ca22d629ab0267593a8c671cae208b1973335dcd9300d730f66b00dc0956a7b90e518fd9f245f47292c6077a9bb65bf2c949"
AC_POWERFUL_OFF="5aa5aa555aa5aa5500000000000000000000000000000000000000000000000049ef000037276a002f80fda8e334ea3401000000c4ea0000058a4bca132e641fda4673cb97b315c9b59eae3f310e50cc4c024c989272ec17c3577c341328745442409b02f1f15cdddb9b645ce8474ce8b0adbb7a342d402eef3e1ec00edf5f0b2ff1cd7fb5e5770758729256d723adf48988ec54ae50029b81f528d144a5d60efd9be7705518d6e4e0ce4e6f465b762e9cbc60af074b58085d5947a70ba9cb3627c249b53fd1ad8884be1dc2c4b420623039fb957f2ac54c35cd79a6b6d5d83e09bf6b73bcff7225c70689436540265bc86ded0c861d8c1c4de2316226c3c40f842fd89ea15a58013f30a3eaa6f0e6b8fa8f25a131dd53d8c885889bddcc975146a0daf1285b478d58b50fc2f7b794a4f5922bd81bcf07235637ff309a308cc5724045e13aa3fa4e9069288444233a2d3a5efbabe1b928bd3cbb43252be8e7d945655c8632054aec25173b0e64eaf35b2abe9c078ac18ba54818a1e3f42e64c03ec2842275919cc956107cc88ccb649b26a031e47d5fed536eed62f8a9bc90034dca25e675b4e14f6553d1b359558ea003257a1a5f4838ab2434d49c8760d75dfc2ebe699bfce12e84df3b66fbaeb5fd8805cdf53122b6b5e51f9bb845da6c2b330c607c5511f347dd65200bc4532403585ee5e51e7b3b2c24b09089293877dfb73c7e65c1e776f20fcb8820c7abc336dd50deefb93ff90930f28d43836a56e3bd568f724cd1037da0a37e47768c8f2952483919150e3b2ae35f79937866ecf081ba92c26defec4c90098e99452c22bbc45942fbde3e5ad44b75b0015411f087eb36b101231b452e9d8b0a27b7036c93925c1b0c82c76c47bf2d0a6eecabc4ce60875c5d368f68cb8c7acfe9f81f810f62fd6214344f7b5f"

AC_HABITACION_OFF="5aa5aa555aa5aa5500000000000000000000000000000000000000000000000087fc000037276a0016806b01b334ea340100000025ea0000fcc3cccaacd788631793631185192924f0e990802caea17e021443c1a116236c006d83070366797f54c70eccc06496265f86bcb14d5b027f7dbee5848c860b91cc5037ffa8123322ce76e2993938861f6be01857611b1c8834f4d7fb82ab8bfa5e16e9fc7506cb0baa76b5b1fea9f928d4f00bc5739bb3de9c419a589b5ad928645195a7d4c128aec6a1f10f6253fcc438f0d1d515a3f824bd06ff253534d4c700375253048f2e5dbb3423ffb28d4df7d8e7ad712c34e73bd5541d0aeebb40c3b7010bc664e86333987368aa6b1d624dd14f8d27797f053bbd167584eaf336f44ee5437cec59d2ab05a64f96583ce414bfe618f874cb454693ebb7c2ec7d1bbf59418c022d1234c164ad4552830028455f548b6ee81d7e6f818a8e45e45d9af2fae1daa35b723e7cea5833f7749dff7453d0d80b4834be0a857dfd7865adcda4d9436547f34f38ddbacfa4b907057cd1d68b1cceb6f077dce0ed5fd479564857e19a8c82cc4969c4a50d3ab7f8a8007ab7702e29adeec37f80652783ea1386e15ce3e2569f40e881e887f8d2a8824d5b4db076c4be31b75a0d21a576f5d99814e7669b43e5c86133f7934789c501d923d62037977c46388004c9b7cd482ffabc6742d3c7455fd3bd39cba576b9c87bea8f97ff2e4450800de0c3181ec2cd13caa47b11d7926fdea608fd93e3b4f46aae15fe4366f54cc6404fc3c502b0e80c9efddf0f3b91bdd1434a8458e5a0bb1283908bb4707625a53f25520d88db55b199e2f5f5ab1b3a7b58ac3ab53d8319f2a8e237b3985423ec0c22fb5bfe990f8f6d67640f05fd0346ad249180e37195bfb4400ed91b5d9cc5878668772b6a6c5912"

####################################
####################################
####################################
####################################

IP_SALON="192.168.1.128"
IP_HABITACION="192.168.1.130"

direccionip=$IP_SALON
comando=$BROADCAST

showHelp () {
    echo "-----------------------------";
    echo "Broadlink RM3 Command Line Interface";
    echo "-----------------------------";
    echo "Usage: `basename $0` <option>";
    echo;
    echo "Options:";
    echo " AC_SALON_ON_23";
    echo " AC_SALON_OFF";
    echo " AC_SALON_COMFORT";
}

if [ $# = 0 ]; then
    showHelp;
    exit 1;
fi

while [ $# -gt 0 ]; do
    arg=$1;
    case $arg in
        "AC_SALON_ON_23"    ) echo "Encendiendo Aire Salon a 23 grados.";
            direccionip=$IP_SALON
            comando=$AC_ON_23
            break ;;
            esac
    case $arg in
        "AC_SALON_OFF"    ) echo "Apagando Aire Salon.";
            direccionip=$IP_SALON
            comando=$AC_OFF
            break ;;
            esac
    case $arg in
        "AC_SALON_COMFORT"    ) echo "Aire Comfort en Salon.";
            direccionip=$IP_SALON
            comando=$AC_COMFORT
            break ;;
            esac
done

####################################
####################################
####################################
####################################

echo $comando | xxd -r -p | nc -4u -w1 $direccionip 80 > /dev/null

#echo $BROADCAST | xxd -r -p | nc -4u -w1 192.168.1.128 80
#echo $AC_ON_23 | xxd -r -p | nc -4u -w1 192.168.1.128 80 | xxd
#echo $AC_OFF | xxd -r -p | nc -4u -w1 192.168.1.128 80 | xxd
